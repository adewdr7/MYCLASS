<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stellar Academy - Pusat Belajar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #050505;
            color: white;
            min-height: 100vh;
        }

        .glass {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .category-pill {
            transition: all 0.3s ease;
        }

        .category-pill.active {
            background: #22d3ee;
            color: #000;
            box-shadow: 0 0 15px rgba(34, 211, 238, 0.4);
        }

        .materi-card:hover {
            transform: translateY(-5px);
            border-color: rgba(34, 211, 238, 0.5);
        }
    </style>
</head>
<body class="p-5 md:p-10">
    
    <!-- Header Area -->
    <div class="max-w-6xl mx-auto flex flex-col md:flex-row md:items-center justify-between gap-5 mb-10">
        <div>
            <a href="dashboard.html" class="flex items-center gap-2 text-slate-500 hover:text-white transition-colors mb-2 text-sm">
                <i data-lucide="arrow-left" class="w-4 h-4"></i> Kembali ke Dashboard
            </a>
            <h1 class="text-3xl font-black uppercase tracking-tighter">Exploration <span class="text-cyan-400">Deck</span></h1>
            <p class="text-slate-400">Pilih modul materi untuk memulai misi belajar hari ini.</p>
        </div>
        
        <!-- User Badge -->
        <div class="glass px-6 py-3 rounded-2xl border-white/10 flex items-center gap-4">
            <div class="text-right">
                <p class="text-[10px] uppercase text-slate-500 font-bold">Logged in as</p>
                <p id="user-display" class="text-sm font-black text-cyan-400">MURID_NAME</p>
            </div>
            <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-cyan-500 to-blue-600 flex items-center justify-center font-bold">
                A
            </div>
        </div>
    </div>

    <!-- Filter Mata Pelajaran -->
    <div class="max-w-6xl mx-auto mb-8 overflow-x-auto pb-4">
        <div class="flex items-center gap-3" id="filter-container">
            <button onclick="filterMateri('Semua')" class="category-pill active px-6 py-2 rounded-full border border-white/10 text-sm font-bold whitespace-nowrap">Semua</button>
            <button onclick="filterMateri('Pendidikan Pancasila')" class="category-pill px-6 py-2 rounded-full border border-white/10 text-sm font-bold whitespace-nowrap">Pancasila</button>
            <button onclick="filterMateri('Bahasa Indonesia')" class="category-pill px-6 py-2 rounded-full border border-white/10 text-sm font-bold whitespace-nowrap">B. Indonesia</button>
            <button onclick="filterMateri('Bahasa Inggris')" class="category-pill px-6 py-2 rounded-full border border-white/10 text-sm font-bold whitespace-nowrap">B. Inggris</button>
            <button onclick="filterMateri('PJOK')" class="category-pill px-6 py-2 rounded-full border border-white/10 text-sm font-bold whitespace-nowrap">PJOK</button>
            <button onclick="filterMateri('Agama Islam')" class="category-pill px-6 py-2 rounded-full border border-white/10 text-sm font-bold whitespace-nowrap">Agama</button>
            <button onclick="filterMateri('Seni Budaya')" class="category-pill px-6 py-2 rounded-full border border-white/10 text-sm font-bold whitespace-nowrap">Seni Budaya</button>
            <button onclick="filterMateri('Bahasa Sunda')" class="category-pill px-6 py-2 rounded-full border border-white/10 text-sm font-bold whitespace-nowrap">B. Sunda</button>
        </div>
    </div>

    <!-- Grid Materi -->
    <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="materi-grid">
        <!-- Materi akan di-load di sini secara dinamis -->
    </div>

    <!-- Modal Detail Materi -->
    <div id="materi-modal" class="fixed inset-0 z-50 bg-black/90 backdrop-blur-md hidden p-5 flex items-center justify-center">
        <div class="glass w-full max-w-4xl max-h-[90vh] rounded-3xl overflow-y-auto relative border-cyan-500/30">
            <button onclick="closeModal()" class="absolute top-5 right-5 p-2 bg-white/10 rounded-full hover:bg-white/20">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            
            <div class="p-8">
                <span id="modal-mapel" class="text-[10px] font-black uppercase tracking-widest text-cyan-400 bg-cyan-500/10 px-3 py-1 rounded-md">MAPEL</span>
                <h2 id="modal-title" class="text-3xl font-black mt-4 mb-2 uppercase italic">JUDUL MATERI</h2>
                <div class="flex items-center gap-4 text-slate-500 text-xs mb-8">
                    <span id="modal-author"><i data-lucide="user" class="inline w-3 h-3"></i> Guru Name</span>
                    <span id="modal-date"><i data-lucide="calendar" class="inline w-3 h-3"></i> Tanggal</span>
                </div>

                <!-- Media Display Area -->
                <div id="media-display" class="w-full rounded-2xl overflow-hidden mb-8 bg-black/40 border border-white/5 min-h-[200px] flex items-center justify-center">
                    <!-- Media Content (Video/Image/Audio) di-inject di sini -->
                </div>

                <div id="modal-content" class="text-slate-300 leading-relaxed whitespace-pre-wrap">
                    Isi konten materi...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data Dummy untuk Testing (Nanti diganti dengan pengambilan dari Firebase)
        const mockMateri = [
            {
                id: 1,
                judul: "Teknik Dasar Sepak Bola",
                mapel: "PJOK",
                deskripsi: "Belajar dribbling dan passing yang benar.",
                konten: "Langkah-langkah dribbling:\n1. Posisi kaki...\n2. Pandangan mata...",
                author: "BPK JAJANG",
                date: "2023-12-26",
                media: "https://res.cloudinary.com/demo/video/upload/f_auto,q_auto/dog.mp4", // Contoh Video
                type: "video"
            },
            {
                id: 2,
                judul: "Introduction to Greetings",
                mapel: "Bahasa Inggris",
                deskripsi: "Cara menyapa orang lain dalam bahasa Inggris.",
                konten: "Hello, Hi, Good Morning...",
                author: "IBU ILAH",
                date: "2023-12-25",
                media: "https://res.cloudinary.com/demo/image/upload/f_auto,q_auto/sample.jpg", // Contoh Gambar
                type: "image"
            }
        ];

        // 1. Tampilkan Nama User
        document.getElementById('user-display').innerText = localStorage.getItem('userName') || "Calon Bintang";

        // 2. Render Materi ke Grid
        function renderMateri(list) {
            const grid = document.getElementById('materi-grid');
            grid.innerHTML = '';

            if (list.length === 0) {
                grid.innerHTML = `<div class="col-span-full py-20 text-center text-slate-600 uppercase font-black tracking-widest">Materi Belum Tersedia</div>`;
                return;
            }

            list.forEach(item => {
                const card = `
                    <div class="materi-card glass p-6 rounded-3xl border border-white/10 transition-all cursor-pointer flex flex-col justify-between" onclick="openMateri(${item.id})">
                        <div>
                            <div class="flex justify-between items-start mb-4">
                                <span class="text-[10px] font-black uppercase text-cyan-400 bg-cyan-500/10 px-2 py-1 rounded">${item.mapel}</span>
                                <i data-lucide="${item.type === 'video' ? 'play-circle' : 'file-text'}" class="w-5 h-5 text-slate-500"></i>
                            </div>
                            <h3 class="text-lg font-bold mb-2 uppercase leading-tight">${item.judul}</h3>
                            <p class="text-sm text-slate-500 line-clamp-2">${item.deskripsi}</p>
                        </div>
                        <div class="mt-6 pt-4 border-t border-white/5 flex items-center justify-between">
                            <span class="text-[10px] text-slate-500 uppercase font-bold tracking-tighter">${item.author}</span>
                            <span class="text-[10px] text-cyan-500/50">MISI BARU</span>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
            lucide.createIcons();
        }

        // 3. Filter Logic
        function filterMateri(category) {
            // Update UI Button
            document.querySelectorAll('.category-pill').forEach(btn => {
                btn.classList.remove('active');
                if (btn.innerText === category || (category === 'Semua' && btn.innerText === 'Semua')) {
                    btn.classList.add('active');
                }
            });

            if (category === 'Semua') {
                renderMateri(mockMateri);
            } else {
                const filtered = mockMateri.filter(m => m.mapel === category);
                renderMateri(filtered);
            }
        }

        // 4. Modal Logic & Media Handling
        function openMateri(id) {
            const item = mockMateri.find(m => m.id === id);
            if (!item) return;

            document.getElementById('modal-title').innerText = item.judul;
            document.getElementById('modal-mapel').innerText = item.mapel;
            document.getElementById('modal-content').innerText = item.konten;
            document.getElementById('modal-author').innerHTML = `<i data-lucide="user" class="inline w-3 h-3"></i> ${item.author}`;
            document.getElementById('modal-date').innerHTML = `<i data-lucide="calendar" class="inline w-3 h-3"></i> ${item.date}`;

            // Media Handling
            const display = document.getElementById('media-display');
            display.innerHTML = '';

            if (item.media) {
                if (item.type === 'video') {
                    display.innerHTML = `<video src="${item.media}" controls class="w-full h-full object-contain"></video>`;
                } else if (item.type === 'image') {
                    display.innerHTML = `<img src="${item.media}" class="w-full h-full object-contain">`;
                } else if (item.type === 'audio') {
                    display.innerHTML = `<div class="p-10 text-center"><i data-lucide="music" class="w-12 h-12 mx-auto mb-4 text-cyan-400"></i><audio src="${item.media}" controls class="w-full"></audio></div>`;
                }
            } else {
                display.classList.add('hidden');
            }

            document.getElementById('materi-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Stop scroll
            lucide.createIcons();
        }

        function closeModal() {
            document.getElementById('materi-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            // Stop Video/Audio saat modal tutup
            const media = document.querySelector('#media-display video, #media-display audio');
            if (media) media.pause();
        }

        // Inisialisasi awal
        window.onload = () => {
            renderMateri(mockMateri);
        };
    </script>
</body>
</html>

